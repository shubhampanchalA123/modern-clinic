{"version":3,"sources":["turbopack:///[project]/HairGrowth-Clinic/node_modules/@emotion/memoize/dist/memoize.esm.js","turbopack:///[project]/HairGrowth-Clinic/node_modules/@emotion/is-prop-valid/dist/is-prop-valid.esm.js","turbopack:///[project]/HairGrowth-Clinic/app/payment-method/online/page.jsx"],"sourcesContent":["function memoize(fn) {\n  var cache = {};\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nexport default memoize;\n","import memoize from '@emotion/memoize';\n\nvar reactPropsRegex = /^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/; // https://esbench.com/bench/5bfee68a4cd7e6009ef61d23\n\nvar index = memoize(function (prop) {\n  return reactPropsRegex.test(prop) || prop.charCodeAt(0) === 111\n  /* o */\n  && prop.charCodeAt(1) === 110\n  /* n */\n  && prop.charCodeAt(2) < 91;\n}\n/* Z+1 */\n);\n\nexport default index;\n","\"use client\";\r\n\r\nimport { motion } from \"framer-motion\";\r\nimport { useSearchParams, useRouter } from \"next/navigation\";\r\nimport { useEffect, useState, Suspense } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { verifyPayment } from \"@/redux/slices/registerSlice\";\r\nimport { createAppointmentOrder, verifyAppointmentPayment } from \"@/redux/slices/appointmentSlice\";\r\n\r\nfunction OnlinePaymentPageInner() {\r\n  const params = useSearchParams();\r\n  const router = useRouter();\r\n  const dispatch = useDispatch();\r\n\r\n  const { createAppointmentOrderSuccess, orderDetails } = useSelector((state) => state.appointment);\r\n\r\n  const [razorpayLoaded, setRazorpayLoaded] = useState(false);\r\n  const [isAppointment, setIsAppointment] = useState(false);\r\n\r\n  const orderId = params.get(\"orderId\") || (orderDetails ? orderDetails.orderId : null);\r\n  const amount = params.get(\"amount\") || (orderDetails ? orderDetails.amount : null);\r\n  const currency = params.get(\"currency\") || (orderDetails ? orderDetails.currency : null);\r\n  const key = params.get(\"key\") || (orderDetails ? orderDetails.key : null);\r\n  const consultantId = params.get(\"consultantId\");\r\n\r\n  // Get appointment data with expiration check (24 hours)\r\n  const getAppointmentData = () => {\r\n    const data = localStorage.getItem(\"appointmentData\");\r\n    if (data) {\r\n      const parsed = JSON.parse(data);\r\n      const now = Date.now();\r\n      const hoursDiff = (now - parsed.timestamp) / (1000 * 60 * 60);\r\n      if (hoursDiff < 24) {\r\n        return parsed;\r\n      } else {\r\n        localStorage.removeItem(\"appointmentData\");\r\n        return null;\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const appointmentData = getAppointmentData();\r\n  const appointmentId = appointmentData?.appointmentId;\r\n  const appointmentAmount = appointmentData?.amount;\r\n\r\n  // Check if appointment and create order\r\n  useEffect(() => {\r\n    if (appointmentId && appointmentAmount && !orderId) {\r\n      setIsAppointment(true);\r\n      dispatch(createAppointmentOrder({\r\n        appointmentId,\r\n        amount: parseInt(appointmentAmount)\r\n      }));\r\n    }\r\n  }, [appointmentId, appointmentAmount, orderId, dispatch]);\r\n\r\n  // Load Razorpay script\r\n  useEffect(() => {\r\n    const script = document.createElement(\"script\");\r\n    script.src = \"https://checkout.razorpay.com/v1/checkout.js\";\r\n    script.onload = () => setRazorpayLoaded(true);\r\n    document.body.appendChild(script);\r\n  }, []);\r\n\r\n  const handlePayment = () => {\r\n    if (!razorpayLoaded || !window.Razorpay) {\r\n      alert(\"Razorpay not loaded\");\r\n      return;\r\n    }\r\n\r\n    const options = {\r\n      key: key,\r\n      amount: amount,\r\n      currency: currency,\r\n      order_id: orderId,\r\n      name: \"Hair Growth Clinic\",\r\n      description: \"Consultation Payment\",\r\n      handler: function (response) {\r\n        // Payment success\r\n        if (isAppointment) {\r\n          dispatch(verifyAppointmentPayment({\r\n            appointmentId,\r\n            razorpay_payment_id: response.razorpay_payment_id,\r\n            razorpay_order_id: response.razorpay_order_id,\r\n            razorpay_signature: response.razorpay_signature\r\n          })).then((result) => {\r\n            if (result.meta.requestStatus === \"fulfilled\") {\r\n              localStorage.removeItem(\"appointmentData\");\r\n              router.push(\"/payment-method/success\");\r\n            } else {\r\n              router.push(\"/payment-method/failed\");\r\n            }\r\n          });\r\n        } else {\r\n          dispatch(verifyPayment({\r\n            consultantId,\r\n            razorpay_payment_id: response.razorpay_payment_id,\r\n            razorpay_order_id: response.razorpay_order_id,\r\n            razorpay_signature: response.razorpay_signature\r\n          })).then((result) => {\r\n            if (result.meta.requestStatus === \"fulfilled\") {\r\n              router.push(\"/payment-method/success\");\r\n            } else {\r\n              router.push(\"/payment-method/failed\");\r\n            }\r\n          });\r\n        }\r\n      },\r\n      prefill: {\r\n        name: \"User Name\", // Can be from user data\r\n        email: \"user@example.com\",\r\n        contact: \"9999999999\"\r\n      },\r\n      theme: {\r\n        color: \"#007bff\"\r\n      }\r\n    };\r\n\r\n    const rzp = new window.Razorpay(options);\r\n    rzp.open();\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-2xl mx-auto px-6 py-20\">\r\n      <motion.div initial={{ opacity: 0, y: 12 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 0.4 }}>\r\n        <h1 className=\"text-3xl font-bold text-foreground\"><span className=\"text-primary\">Online</span> Payment</h1>\r\n        <p className=\"text-muted-foreground mt-2\">\r\n          Complete payment for {isAppointment ? \"Appointment\" : \"Consultation\"} using UPI, Credit/Debit Card or Net Banking.\r\n        </p>\r\n      </motion.div>\r\n\r\n      <motion.div\r\n        className=\"mt-10 p-6 rounded-2xl bg-card/70 backdrop-blur-xl border border-border shadow-sm\"\r\n        initial={{ opacity: 0, y: 16 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 0.5 }}\r\n      >\r\n        <div className=\"mb-4\">\r\n          <p className=\"text-sm text-muted-foreground\">Order ID: {orderId}</p>\r\n          <p className=\"text-sm text-muted-foreground\">Amount: â‚¹{amount / 100}</p>\r\n        </div>\r\n        <button\r\n          onClick={handlePayment}\r\n          disabled={!razorpayLoaded}\r\n          className=\"mt-6 bg-primary text-primary-foreground px-5 py-3 rounded-xl hover:bg-primary/80 transition disabled:opacity-50\"\r\n        >\r\n          {razorpayLoaded ? \"Proceed to Pay\" : \"Loading...\"}\r\n        </button>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function OnlinePaymentPage() {\r\n  return (\r\n    <Suspense fallback={<div>Loading...</div>}>\r\n      <OnlinePaymentPageInner />\r\n    </Suspense>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[0,1]}