{"version":3,"sources":["turbopack:///[project]/HairGrowth-Clinic/app/HairGrowth/register/page.jsx","turbopack:///[project]/HairGrowth-Clinic/components/Register/ProgressTabs.jsx","turbopack:///[project]/HairGrowth-Clinic/components/Register/QuestionCard.jsx","turbopack:///[project]/HairGrowth-Clinic/components/Register/PhotoUploader.jsx","turbopack:///[project]/HairGrowth-Clinic/components/PlanSelector.jsx","turbopack:///[project]/HairGrowth-Clinic/hooks/useBaseURL.js"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport ProgressTabs from \"@/components/Register/ProgressTabs\";\r\nimport QuestionCard from \"@/components/Register/QuestionCard\";\r\nimport PhotoUploader from \"@/components/Register/PhotoUploader\";\r\nimport PlanSelector from \"@/components/PlanSelector\";\r\nimport { auth } from \"@/lib/firebase\";\r\nimport { RecaptchaVerifier, signInWithPhoneNumber } from \"firebase/auth\";\r\nimport useBaseURL from \"@/hooks/useBaseURL\";\r\nimport { MapPin, ChevronDown } from \"lucide-react\";\r\nimport { registerUser, verifyUser, submitData, createOrder, clearApiState } from \"@/redux/slices/registerSlice\";\r\n\r\nexport default function RegisterFlow() {\r\n  const router = useRouter();\r\n  const dispatch = useDispatch();\r\n\r\n  // Redux state\r\n  const { loading, error, registerSuccess, verifySuccess, submitSuccess, createOrderSuccess, orderDetails, consultantId } = useSelector(\r\n    (state) => state.register\r\n  );\r\n\r\n  console.log(\"Register State:\", { loading, error, registerSuccess, verifySuccess, submitSuccess, consultantId });\r\n  const [step, setStep] = useState(0);\r\n  const [errors, setErrors] = useState({});\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    phone: \"\",\r\n    age: \"\",\r\n    region: \"\",\r\n    gender: \"\",\r\n    healthIssue: \"hair fall\",\r\n    stage: null,\r\n    hair: {},\r\n    internal: {},\r\n    scalpPhoto: null,\r\n    plan: \"\",\r\n    planPrice: 0,\r\n  });\r\n\r\n  const [openDropdown, setOpenDropdown] = useState(null);\r\n  const [confirmationResult, setConfirmationResult] = useState(null);\r\n  const recaptchaRef = useRef(null);\r\n\r\n  const [otpModalOpen, setOtpModalOpen] = useState(false);\r\n  const [otpSent, setOtpSent] = useState(false);\r\n  const [otp, setOtp] = useState(\"\");\r\n\r\n  const baseURL = useBaseURL();\r\n\r\n  const regionList = [\r\n    \"India\",\r\n    \"Asia\",\r\n    \"Europe, Australia\",\r\n    \"USA, Canada\",\r\n    \"South America, Africa\"\r\n  ];\r\n\r\n  const healthIssues = [\r\n    \"Hair Fall\",\r\n    \"Respiratory\",\r\n    \"Skin Disorders\",\r\n    \"Gastrointestinal\",\r\n    \"Mental & Emotional Health\",\r\n    \"Musculoskeletal\",\r\n    \"ENT Problems\",\r\n    \"Women’s Health\",\r\n    \"Children’s Health\",\r\n    \"Chronic Conditions\",\r\n    \"Lifestyle-Related Problems\",\r\n    \"Obesity\"\r\n  ];\r\n\r\n\r\n  // Initialize Recaptcha\r\n  useEffect(() => {\r\n    if (!recaptchaRef.current) {\r\n      recaptchaRef.current = new RecaptchaVerifier(\r\n        \"recaptcha-container\",\r\n        { size: \"invisible\" },\r\n        auth\r\n      );\r\n    }\r\n  }, []);\r\n\r\n  // Handle registration success → automatically proceed to verify\r\n  useEffect(() => {\r\n    if (registerSuccess && consultantId) {\r\n      console.log(\"Registration successful! ConsultantId:\", consultantId);\r\n      localStorage.setItem(\"consultantId\", consultantId);\r\n      // Now send OTP via Firebase\r\n      sendOtp();\r\n    }\r\n  }, [registerSuccess, consultantId]);\r\n\r\n  // Handle verify success → move to step 1 or 4\r\n  useEffect(() => {\r\n    if (verifySuccess) {\r\n      setOtpModalOpen(false);\r\n      setStep(form.healthIssue === \"hair fall\" ? 1 : 4);\r\n      window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n      dispatch(clearApiState());\r\n    }\r\n  }, [verifySuccess, form.healthIssue]);\r\n\r\n  // Handle submit success → create order\r\n  useEffect(() => {\r\n    if (submitSuccess) {\r\n      const currentConsultantId = consultantId || localStorage.getItem(\"consultantId\");\r\n      dispatch(createOrder({\r\n        consultantId: currentConsultantId,\r\n        amount: form.planPrice\r\n      }));\r\n      dispatch(clearApiState());\r\n    }\r\n  }, [submitSuccess]);\r\n\r\n  // Handle create order success → redirect to payment\r\n  useEffect(() => {\r\n    if (createOrderSuccess && orderDetails) {\r\n      const params = new URLSearchParams({\r\n        orderId: orderDetails.orderId,\r\n        amount: orderDetails.amount,\r\n        currency: orderDetails.currency,\r\n        key: orderDetails.key,\r\n        consultantId: consultantId || localStorage.getItem(\"consultantId\")\r\n      });\r\n      router.push(`/payment-method/online?${params.toString()}`);\r\n      dispatch(clearApiState());\r\n    }\r\n  }, [createOrderSuccess, orderDetails]);\r\n\r\n  // Handle errors\r\n  useEffect(() => {\r\n    if (error) {\r\n      alert(error);\r\n      dispatch(clearApiState());\r\n    }\r\n  }, [error]);\r\n\r\n  // Send OTP via Firebase\r\n  async function sendOtp() {\r\n    try {\r\n      if (!recaptchaRef.current) {\r\n        alert(\"Recaptcha not ready! Try again.\");\r\n        return;\r\n      }\r\n\r\n      const phone = \"+91\" + form.phone;\r\n      const result = await signInWithPhoneNumber(auth, phone, recaptchaRef.current);\r\n\r\n      setConfirmationResult(result);\r\n      setOtpSent(true);\r\n    } catch (err) {\r\n      console.log(\"SEND OTP ERROR:\", err);\r\n      alert(\"OTP sending failed. Try again.\");\r\n    }\r\n  }\r\n\r\n  // Verify OTP and call Redux verify API\r\n  async function verifyOtp() {\r\n    try {\r\n      if (!confirmationResult) {\r\n        alert(\"OTP expired. Please resend.\");\r\n        return;\r\n      }\r\n\r\n      // Confirm OTP with Firebase\r\n      await confirmationResult.confirm(otp);\r\n\r\n      // Get Firebase ID token\r\n      const idToken = await auth.currentUser.getIdToken();\r\n\r\n      // Dispatch Redux verify action\r\n      dispatch(\r\n        verifyUser({\r\n          mobile: form.phone,\r\n          idToken: idToken,\r\n          consultantId: consultantId,\r\n        })\r\n      );\r\n    } catch (err) {\r\n      console.log(\"VERIFY ERROR\", err);\r\n      alert(\"Invalid OTP\");\r\n    }\r\n  }\r\n\r\n  // Validation\r\n  function validateStep() {\r\n    let err = {};\r\n\r\n    if (step === 0) {\r\n      if (!form.name.trim()) err.name = \"Name is required\";\r\n      if (!form.phone.trim()) err.phone = \"Phone is required\";\r\n      if (!form.age) err.age = \"Age is required\";\r\n      if (!form.gender) err.gender = \"Gender is required\";\r\n      if (!form.region) err.region = \"Region is required\";\r\n    }\r\n\r\n    if (step === 1) {\r\n      if (form.stage === null) err.stage = \"Please choose your stage\";\r\n    }\r\n\r\n    if (step === 3) {\r\n      if (!form.scalpPhoto) err.scalpPhoto = \"Scalp photo is required\";\r\n    }\r\n\r\n    if (step === 4) {\r\n      if (!form.plan) err.plan = \"Please select a plan\";\r\n    }\r\n\r\n    setErrors(err);\r\n    return Object.keys(err).length === 0;\r\n  }\r\n\r\n  function next() {\r\n    if (!validateStep()) return;\r\n\r\n    if (step === 0) {\r\n      // Dispatch Redux register action\r\n      dispatch(\r\n        registerUser({\r\n          name: form.name,\r\n          mobile: form.phone,\r\n          age: form.age,\r\n          gender: form.gender,\r\n          region: form.region,\r\n          healthIssue: form.healthIssue,\r\n        })\r\n      );\r\n      setOtpModalOpen(true);\r\n      return;\r\n    }\r\n\r\n    setStep((p) => p + 1);\r\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n  }\r\n\r\n  function prev() {\r\n    if (step === 1) {\r\n      setStep(0);\r\n    } else if (step === 2) {\r\n      setStep(1);\r\n    } else if (step === 3) {\r\n      setStep(2);\r\n    } else if (step === 4) {\r\n      if (form.healthIssue === \"hair fall\") {\r\n        setStep(3);\r\n      } else {\r\n        setStep(0);\r\n      }\r\n    }\r\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n  }\r\n\r\n  function updateField(field, value) {\r\n    setForm((prev) => ({ ...prev, [field]: value }));\r\n  }\r\n\r\n  function updateNested(section, id, value) {\r\n    setForm((prev) => ({\r\n      ...prev,\r\n      [section]: { ...prev[section], [id]: value },\r\n    }));\r\n  }\r\n\r\n  // Submit final assessment\r\n  function submit() {\r\n    if (!validateStep()) return;\r\n\r\n    const currentConsultantId = consultantId || localStorage.getItem(\"consultantId\");\r\n    if (!currentConsultantId) {\r\n      alert(\"Please complete registration and verification first\");\r\n      setStep(0);\r\n      return;\r\n    }\r\n\r\n    const consultationData = {\r\n      hairHealth: {\r\n        stage: form.stage,\r\n        familyHistory: form.hair?.family || \"\",\r\n        dandruff: form.hair?.dandruff || \"\",\r\n        selectedStage: form.stage\r\n      },\r\n      internalHealth: form.internal || {},\r\n      scalpAssessment: {\r\n        scalpPhoto: form.scalpPhoto?.name || null\r\n      },\r\n      plan: form.plan\r\n    };\r\n\r\n    dispatch(submitData({\r\n      consultantId: currentConsultantId,\r\n      consultationData: consultationData,\r\n      scalpPhoto: form.scalpPhoto\r\n    }));\r\n  }\r\n\r\n  const hairQuestions = [\r\n    {\r\n      id: \"family\",\r\n      q: \"Do you have a family history of hair loss?\",\r\n      options: [\r\n        \"Mother or mother's side\",\r\n        \"Father or father's side\",\r\n        \"Both\",\r\n        \"None\",\r\n      ],\r\n    },\r\n    {\r\n      id: \"dandruff\",\r\n      q: \"Do you have Dandruff?\",\r\n      options: [\r\n        \"No Dandruff\",\r\n        \"Mild Dandruff\",\r\n        \"Heavy Dandruff\",\r\n        \"Psoriasis / Seborrheic Dermatitis\",\r\n      ],\r\n    },\r\n  ];\r\n\r\n  const internalQuestions = [\r\n    {\r\n      id: \"sleep\",\r\n      q: \"How well do you sleep?\",\r\n      options: [\r\n        \"Peacefully 6-8 hours\",\r\n        \"Disturbed sleep\",\r\n        \"Difficulty sleeping\",\r\n      ],\r\n    },\r\n    {\r\n      id: \"stress\",\r\n      q: \"How stressed are you?\",\r\n      options: [\"None\", \"Low\", \"Moderate\", \"High\"],\r\n    },\r\n    {\r\n      id: \"constipation\",\r\n      q: \"Do you feel constipated?\",\r\n      options: [\r\n        \"No\",\r\n        \"Yes (fewer than 3 stools/week)\",\r\n        \"Unsatisfied after stools\",\r\n        \"IBS\",\r\n      ],\r\n    },\r\n    {\r\n      id: \"gas\",\r\n      q: \"Gas, Acidity, or Bloating?\",\r\n      options: [\"No\", \"Sometimes\", \"Often\"],\r\n    },\r\n    {\r\n      id: \"energy\",\r\n      q: \"How is your energy during the day?\",\r\n      options: [\r\n        \"Normal\",\r\n        \"Low in morning\",\r\n        \"Low afternoon\",\r\n        \"Low evening\",\r\n        \"Always low\",\r\n      ],\r\n    },\r\n    {\r\n      id: \"supplements\",\r\n      q: \"Are you taking supplements?\",\r\n      options: [\"Yes\", \"No\"],\r\n    },\r\n  ];\r\n\r\n  const stageData = {\r\n    male: [\r\n      { id: 0, label: \"Stage 1 (Mild)\", img: \"/images/stages/male-stage1.png\" },\r\n      { id: 1, label: \"Stage 2 (Moderate)\", img: \"/images/stages/male-stage2.png\" },\r\n      { id: 2, label: \"Stage 3 (Severe)\", img: \"/images/stages/male-stage3.png\" },\r\n    ],\r\n    female: [\r\n      { id: 0, label: \"Stage 1 (Mild)\", img: \"/images/stages/female-stage1.png\" },\r\n      { id: 1, label: \"Stage 2 (Moderate)\", img: \"/images/stages/female-stage2.png\" },\r\n      { id: 2, label: \"Stage 3 (Severe)\", img: \"/images/stages/female-stage3.png\" },\r\n    ],\r\n  };\r\n\r\n  const gender = form.gender || \"male\";\r\n  const stageImages = stageData[gender];\r\n\r\n  const DropdownShell = ({ children }) => (\r\n    <div className=\"absolute top-full left-0 w-full mt-2 bg-card border border-border shadow-lg rounded-xl p-2 z-20\">\r\n      {children}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"min-h-screen py-8 bg-background-soft\">\r\n      <main className=\"max-w-4xl mx-auto px-6\">\r\n        <div id=\"recaptcha-container\"></div>\r\n\r\n        {/* Top Bar */}\r\n        <div className=\"flex justify-between mb-4 text-sm text-muted-foreground\">\r\n          {step > 0 ? <button onClick={prev}>← Previous</button> : <span />}\r\n          <Link href=\"/\" className=\"hover:text-accent\">Exit</Link>\r\n        </div>\r\n\r\n        <ProgressTabs step={step} healthIssue={form.healthIssue} />\r\n\r\n        {/* CARD WRAPPER */}\r\n        <div className=\"bg-card mt-6 rounded-2xl shadow-soft border border-border p-6\">\r\n\r\n          {/* STEP 0 — ABOUT YOU */}\r\n          {step === 0 && (\r\n            <>\r\n              <h2 className=\"text-4xl text-center font-bold mb-8 text-foreground\">\r\n                Tell us about you\r\n              </h2>\r\n\r\n              {/* Name */}\r\n              <div className=\"mb-4\">\r\n                <label className=\"font-medium text-foreground\">Full Name</label>\r\n                <input\r\n                  className=\"w-full border border-border bg-background px-3 py-2 rounded mt-1 text-foreground\"\r\n                  value={form.name}\r\n                  onChange={(e) => updateField(\"name\", e.target.value)}\r\n                />\r\n                {errors.name && (\r\n                  <p className=\"text-red-600 text-sm mt-1\">{errors.name}</p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Phone */}\r\n              <div className=\"mb-4\">\r\n                <label className=\"font-medium text-foreground\">Phone Number</label>\r\n                <input\r\n                  className=\"w-full border border-border bg-background px-3 py-2 rounded mt-1 text-foreground\"\r\n                  value={form.phone}\r\n                  onChange={(e) => updateField(\"phone\", e.target.value)}\r\n                />\r\n                {errors.phone && (\r\n                  <p className=\"text-red-600 text-sm mt-1\">{errors.phone}</p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Age */}\r\n              <div className=\"mb-4\">\r\n                <label className=\"font-medium text-foreground\">Age</label>\r\n                <input\r\n                  type=\"number\"\r\n                  className=\"w-full border border-border bg-background px-3 py-2 rounded mt-1 text-foreground\"\r\n                  value={form.age}\r\n                  onChange={(e) => updateField(\"age\", e.target.value)}\r\n                />\r\n                {errors.age && (\r\n                  <p className=\"text-red-600 text-sm mt-1\">{errors.age}</p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Gender */}\r\n              <div>\r\n                <label className=\"font-medium text-foreground\">Gender</label>\r\n                <div className=\"flex gap-3 mt-2\">\r\n                  {[\"male\", \"female\"].map((g) => (\r\n                    <button\r\n                      key={g}\r\n                      onClick={() => updateField(\"gender\", g)}\r\n                      className={`px-5 py-2 rounded border \r\n                        ${form.gender === g\r\n                          ? \"bg-primary text-primary-foreground\"\r\n                          : \"bg-muted text-foreground border-border\"\r\n                        }`}\r\n                    >\r\n                      {g.toUpperCase()}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n                {errors.gender && (\r\n                  <p className=\"text-red-600 text-sm mt-1\">{errors.gender}</p>\r\n                )}\r\n              </div>\r\n\r\n              {/* REGION */}\r\n              <div className=\"flex flex-col relative mt-4\">\r\n                <label className=\"text-sm font-medium text-foreground mb-1\">\r\n                  Region\r\n                </label>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() =>\r\n                    setOpenDropdown(openDropdown === \"region\" ? null : \"region\")\r\n                  }\r\n                  className=\"flex items-center justify-between bg-background border border-border px-3 py-2 rounded-xl w-full text-foreground\"\r\n                >\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <MapPin size={18} className=\"text-primary\" />\r\n                    {form.region || \"Select Region\"}\r\n                  </div>\r\n                  <ChevronDown size={16} className=\"text-muted-foreground\" />\r\n                </button>\r\n\r\n                {openDropdown === \"region\" && (\r\n                  <DropdownShell>\r\n                    {regionList.map((r) => (\r\n                      <div\r\n                        key={r}\r\n                        onClick={() => {\r\n                          updateField(\"region\", r);\r\n                          setOpenDropdown(null);\r\n                        }}\r\n                        className=\"px-3 py-2 hover:bg-secondary/15 rounded-lg cursor-pointer text-sm text-foreground\"\r\n                      >\r\n                        {r}\r\n                      </div>\r\n                    ))}\r\n                  </DropdownShell>\r\n                )}\r\n\r\n                {errors.region && (\r\n                  <p className=\"text-red-600 text-sm mt-1\">{errors.region}</p>\r\n                )}\r\n              </div>\r\n\r\n              {/* HEALTH ISSUE */}\r\n              <div className=\"flex flex-col relative mt-4\">\r\n                <label className=\"text-sm font-medium text-foreground mb-1\">\r\n                  Health Issue\r\n                </label>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() =>\r\n                    setOpenDropdown(openDropdown === \"health\" ? null : \"health\")\r\n                  }\r\n                  className=\"flex items-center justify-between bg-background border border-border px-3 py-2 rounded-xl w-full text-foreground\"\r\n                >\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <span>{form.healthIssue || \"Select Health Issue\"}</span>\r\n                  </div>\r\n                  <ChevronDown size={16} className=\"text-muted-foreground\" />\r\n                </button>\r\n\r\n                {openDropdown === \"health\" && (\r\n                  <DropdownShell>\r\n                    {healthIssues.map((h) => (\r\n                      <div\r\n                        key={h}\r\n                        onClick={() => {\r\n                          updateField(\"healthIssue\", h.toLowerCase());\r\n                          setOpenDropdown(null);\r\n                        }}\r\n                        className=\"px-3 py-2 hover:bg-secondary/15 rounded-lg cursor-pointer text-sm text-foreground\"\r\n                      >\r\n                        {h}\r\n                      </div>\r\n                    ))}\r\n                  </DropdownShell>\r\n                )}\r\n              </div>\r\n            </>\r\n          )}\r\n\r\n          {/* STEP 1 — HAIR HEALTH */}\r\n          {step === 1 && form.healthIssue === \"hair fall\" && (\r\n            <>\r\n              <h2 className=\"text-4xl text-center font-bold mb-8 text-foreground\">\r\n                Hair Health\r\n              </h2>\r\n\r\n              {/* Stage Selection */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                {stageImages.map((s) => (\r\n                  <div\r\n                    key={s.id}\r\n                    onClick={() => updateField(\"stage\", s.id)}\r\n                    className={`rounded-xl border p-4 cursor-pointer transition\r\n                      ${form.stage === s.id\r\n                        ? \"ring-2 ring-primary bg-primary/10\"\r\n                        : \"border-border bg-muted\"\r\n                      }`}\r\n                  >\r\n                    <img src={s.img} className=\"w-full mb-3 rounded\" />\r\n                    <p className=\"font-medium text-foreground\">{s.label}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              {errors.stage && (\r\n                <p className=\"text-red-600 text-sm mt-2\">{errors.stage}</p>\r\n              )}\r\n\r\n              {/* Hair Questions */}\r\n              <div className=\"mt-6 space-y-6\">\r\n                {hairQuestions.map((q) => (\r\n                  <QuestionCard\r\n                    key={q.id}\r\n                    question={q.q}\r\n                    options={q.options}\r\n                    value={form.hair[q.id]}\r\n                    onChange={(v) => updateNested(\"hair\", q.id, v)}\r\n                  />\r\n                ))}\r\n              </div>\r\n            </>\r\n          )}\r\n\r\n          {/* STEP 2 — INTERNAL HEALTH */}\r\n          {step === 2 && form.healthIssue === \"hair fall\" && (\r\n            <>\r\n              <h2 className=\"text-4xl text-center font-bold mb-8 text-foreground\">\r\n                Internal Health\r\n              </h2>\r\n\r\n              <div className=\"space-y-6\">\r\n                {internalQuestions.map((q) => (\r\n                  <QuestionCard\r\n                    key={q.id}\r\n                    question={q.q}\r\n                    options={q.options}\r\n                    value={form.internal[q.id]}\r\n                    onChange={(v) => updateNested(\"internal\", q.id, v)}\r\n                  />\r\n                ))}\r\n              </div>\r\n            </>\r\n          )}\r\n\r\n          {/* STEP 3 — SCALP PHOTO */}\r\n          {step === 3 && form.healthIssue === \"hair fall\" && (\r\n            <>\r\n              <h2 className=\"text-2xl font-semibold text-center mb-4 text-foreground\">\r\n                Upload your scalp picture\r\n              </h2>\r\n\r\n              <PhotoUploader\r\n                file={form.scalpPhoto}\r\n                onChange={(file) => updateField(\"scalpPhoto\", file)}\r\n              />\r\n\r\n              {errors.scalpPhoto && (\r\n                <p className=\"text-red-600 text-sm mt-2\">{errors.scalpPhoto}</p>\r\n              )}\r\n            </>\r\n          )}\r\n\r\n          {/* STEP 4 — PLAN SELECTION */}\r\n          {step === 4 && (\r\n            <>\r\n              <h2 className=\"text-4xl text-center font-bold mb-8 text-foreground\">\r\n                Choose Your Plan\r\n              </h2>\r\n\r\n              <PlanSelector\r\n                selectedPlan={form.plan}\r\n                onSelect={(plan) => {\r\n                  updateField(\"plan\", plan.id);\r\n                  updateField(\"planPrice\", plan.price);\r\n                }}\r\n              />\r\n\r\n              {errors.plan && (\r\n                <p className=\"text-red-600 text-sm mt-4 text-center\">{errors.plan}</p>\r\n              )}\r\n            </>\r\n          )}\r\n\r\n          {/* BUTTONS */}\r\n          <div className=\"flex justify-end mt-6\">\r\n            {step < 4 ? (\r\n              <button\r\n                onClick={next}\r\n                disabled={loading}\r\n                className=\"px-6 py-2 bg-primary text-primary-foreground rounded shadow-soft hover:bg-primary-dark disabled:opacity-50\"\r\n              >\r\n                {loading ? \"Processing...\" : \"Next →\"}\r\n              </button>\r\n            ) : (\r\n              <button\r\n                onClick={submit}\r\n                className=\"px-6 py-2 bg-accent text-accent-foreground rounded shadow-soft hover:bg-accent/80\"\r\n              >\r\n                Proceed to Payment\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* OTP MODAL */}\r\n        {otpModalOpen && (\r\n          <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\r\n            <div className=\"bg-white p-6 rounded-xl shadow-xl w-full max-w-md\">\r\n              <h2 className=\"text-xl font-semibold text-center mb-4\">\r\n                Verify Your Phone\r\n              </h2>\r\n\r\n              <p className=\"text-center text-gray-600 text-sm mb-2\">\r\n                OTP will be sent to:\r\n              </p>\r\n              <p className=\"text-center font-medium mb-4\">\r\n                +91 {form.phone}\r\n              </p>\r\n\r\n              {!otpSent ? (\r\n                <div className=\"text-center text-gray-500\">\r\n                  Sending OTP...\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"w-full border px-3 py-2 rounded mb-3\"\r\n                    placeholder=\"Enter OTP\"\r\n                    value={otp}\r\n                    onChange={(e) => setOtp(e.target.value)}\r\n                  />\r\n\r\n                  <button\r\n                    onClick={verifyOtp}\r\n                    disabled={loading}\r\n                    className=\"w-full bg-primary text-white py-2 rounded-lg disabled:opacity-50\"\r\n                  >\r\n                    {loading ? \"Verifying...\" : \"Verify OTP\"}\r\n                  </button>\r\n                </>\r\n              )}\r\n\r\n              <button\r\n                onClick={() => {\r\n                  setOtpModalOpen(false);\r\n                  setOtpSent(false);\r\n                  setOtp(\"\");\r\n                }}\r\n                className=\"mt-4 w-full text-center text-gray-500 text-sm\"\r\n              >\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n}","\"use client\";\r\n\r\nimport React from \"react\";\r\n\r\nexport default function ProgressTabs({ step = 0, healthIssue = \"hair fall\" }) {\r\n  const tabs = [\"About You\", \"Hair Health\", \"Internal Health\", \"Scalp Assessment\", \"Plan Selection\"];\r\n  const percent = healthIssue === \"hair fall\" ? Math.round((step / 4) * 100) : (step === 0 ? 0 : 100);\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      <div className=\"flex items-center gap-2\">\r\n        \r\n        {/* Left Spacer */}\r\n        <div className=\"flex-1 hidden md:block\" />\r\n\r\n        {/* Scrollable Tabs */}\r\n        <div\r\n          className=\"\r\n            flex gap-3 \r\n            overflow-x-auto \r\n            no-scrollbar \r\n            max-w-full \r\n            py-1\r\n          \"\r\n        >\r\n          {tabs.map((t, i) => {\r\n            if (healthIssue !== \"hair fall\" && i > 0 && i < 4) return null;\r\n            return (\r\n              <div\r\n                key={t}\r\n                className={`\r\n                  px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap\r\n                  ${\r\n                    i <= step\r\n                      ? \"bg-primary/20 text-foreground\"\r\n                      : \"bg-muted text-muted-foreground\"\r\n                  }\r\n                `}\r\n              >\r\n                {t}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {/* Right: Percentage */}\r\n        <div className=\"flex-1 text-right text-sm text-muted-foreground hidden md:block\">\r\n          {percent}%\r\n        </div>\r\n      </div>\r\n\r\n      {/* Progress Bar */}\r\n      <div className=\"mt-4 w-full\">\r\n        <div className=\"h-2 bg-muted rounded-full\">\r\n          <div\r\n            className=\"h-2 bg-primary rounded-full transition-all\"\r\n            style={{ width: `${percent}%` }}\r\n          ></div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Percent underneath on mobile */}\r\n      <div className=\"md:hidden text-right text-xs text-muted-foreground mt-1\">\r\n        {percent}%\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport React from \"react\";\r\n\r\nexport default function QuestionCard({ question, options = [], value, onChange }) {\r\n  return (\r\n    <div className=\"p-6 bg-card rounded-2xl border border-border shadow-soft\">\r\n      <h3 className=\"text-lg font-semibold text-foreground mb-4\">{question}</h3>\r\n\r\n      <div className=\"space-y-4\">\r\n        {options.map((opt, idx) => (\r\n          <label\r\n            key={idx}\r\n            className=\"flex items-center gap-4 cursor-pointer\"\r\n          >\r\n            <input\r\n              type=\"radio\"\r\n              name={question}\r\n              checked={value === opt}\r\n              onChange={() => onChange(opt)}\r\n              className=\"form-radio text-primary h-4 w-4\"\r\n            />\r\n            <span className=\"text-foreground\">{opt}</span>\r\n          </label>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport { useRef, useState, useEffect } from \"react\";\r\n\r\nexport default function PhotoUploader({ file, onChange }) {\r\n  const inputRef = useRef(null);\r\n  const [preview, setPreview] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (file) {\r\n      const url = URL.createObjectURL(file);\r\n      setPreview(url);\r\n      return () => URL.revokeObjectURL(url);\r\n    } else {\r\n      setPreview(null);\r\n    }\r\n  }, [file]);\r\n\r\n  function handleFileChange(e) {\r\n    const f = e.target.files?.[0];\r\n    if (f) onChange(f);\r\n  }\r\n\r\n  function handleRemove() {\r\n    onChange(null);\r\n    if (inputRef.current) inputRef.current.value = null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center gap-4\">\r\n      \r\n      {/* Preview Box */}\r\n      <div className=\"w-48 h-48 rounded-xl bg-muted flex items-center justify-center overflow-hidden shadow-soft border border-border\">\r\n        {preview ? (\r\n          <img src={preview} alt=\"preview\" className=\"object-cover w-full h-full\" />\r\n        ) : (\r\n          <div className=\"text-center text-muted-foreground\">No photo yet</div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Upload + Camera Buttons */}\r\n      <div className=\"flex gap-3 w-full justify-center\">\r\n\r\n        {/* Upload Button */}\r\n        <label className=\"inline-flex items-center justify-center px-6 py-3 border border-border bg-card rounded text-sm cursor-pointer hover:bg-muted transition\">\r\n          Upload Scalp Photo\r\n          <input\r\n            ref={inputRef}\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            style={{ display: \"none\" }}\r\n            onChange={handleFileChange}\r\n          />\r\n        </label>\r\n\r\n        {/* Camera / Capture Button */}\r\n        <label className=\"inline-flex items-center justify-center px-6 py-3 bg-primary text-primary-foreground rounded text-sm cursor-pointer hover:opacity-90 transition shadow-soft\">\r\n          Take a Picture\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            capture=\"environment\"\r\n            style={{ display: \"none\" }}\r\n            onChange={handleFileChange}\r\n          />\r\n        </label>\r\n      </div>\r\n\r\n      {/* Remove Button */}\r\n      {preview && (\r\n        <div className=\"flex gap-3\">\r\n          <button\r\n            onClick={handleRemove}\r\n            className=\"px-4 py-2 bg-card border border-border rounded shadow-soft text-sm hover:bg-muted transition\"\r\n          >\r\n            Remove\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { Button } from \"@/components/ui/button\";\r\n\r\nconst plans = [\r\n  {\r\n    id: \"quick\",\r\n    title: \"Quick Consult\",\r\n    price: 499,\r\n    summary: \"15 min video consult + basic plan\",\r\n    includes: [\"Doctor review\", \"1 follow-up chat\"],\r\n  },\r\n  {\r\n    id: \"standard\",\r\n    title: \"Standard Care\",\r\n    price: 1499,\r\n    summary: \"30 min consult + 4-week plan\",\r\n    includes: [\"Personal Rx\", \"2 follow-ups\"],\r\n  },\r\n  {\r\n    id: \"comprehensive\",\r\n    title: \"Comprehensive Remote\",\r\n    price: 3999,\r\n    summary: \"Detailed digital diagnosis + 3 month support\",\r\n    includes: [\"AI-assisted report\", \"Monthly doctor reviews\"],\r\n  },\r\n];\r\n\r\nexport default function PlanSelector({ plans: propPlans, onSelect, selectedPlan }) {\r\n  const displayPlans = propPlans || plans;\r\n  return (\r\n    <div className=\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n      {displayPlans.map((p) => {\r\n        const isSelected = selectedPlan === p.id;\r\n        return (\r\n          <div\r\n            key={p.id}\r\n            className={`relative bg-white rounded-2xl shadow-md border p-6 flex flex-col transition-all ${\r\n              isSelected ? \"border-blue-500 bg-blue-50 shadow-lg\" : \"border-gray-200\"\r\n            }`}\r\n          >\r\n            {isSelected && (\r\n              <div className=\"absolute top-3 right-3 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center\">\r\n                <span className=\"text-white text-sm\">✓</span>\r\n              </div>\r\n            )}\r\n\r\n            {/* Title + Price */}\r\n            <div className=\"flex justify-between items-center\">\r\n              <h3 className=\"font-semibold text-lg\">{p.title}</h3>\r\n              <span className=\"text-xl font-bold\">₹{p.price}</span>\r\n            </div>\r\n\r\n            {/* Summary */}\r\n            <p className=\"text-sm text-gray-600 mt-2\">{p.summary}</p>\r\n\r\n            {/* Features */}\r\n            <ul className=\"mt-4 text-sm text-gray-700 space-y-2 flex-1\">\r\n              {p.includes.map((item) => (\r\n                <li key={item} className=\"flex gap-2\">\r\n                  <span>✔</span> {item}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n\r\n            {/* Button */}\r\n            <Button\r\n              className=\"w-full mt-5 bg-blue-600 hover:bg-blue-700 text-white\"\r\n              onClick={() => onSelect(p)}\r\n            >\r\n              Book\r\n            </Button>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nexport default function useBaseURL() {\r\n  if (typeof window !== \"undefined\") {\r\n    return window.location.origin; // auto-detects IP + port\r\n  }\r\n  return \"\";\r\n}\r\n"],"names":[],"mappings":"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"}