(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,25300,e=>{"use strict";var t=e.i(90577);function s({children:e,className:s="",variant:r="default",...a}){return(0,t.jsx)("button",{className:`px-4 py-2 rounded-md font-medium ${"ghost"===r?"bg-transparent border":"bg-emerald-600 text-white"} ${s}`,...a,children:e})}e.s(["Button",()=>s])},92348,e=>{"use strict";let t=(0,e.i(37127).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>t],92348)},45682,e=>{"use strict";var t=e.i(90577),s=e.i(76097),r=e.i(29403),a=e.i(4336),l=e.i(60685);function n({step:e=0,healthIssue:s="hair fall"}){let r="hair fall"===s?Math.round(e/4*100):100*(0!==e);return(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"flex-1 hidden md:block"}),(0,t.jsx)("div",{className:"   flex gap-3    overflow-x-auto    no-scrollbar    max-w-full    py-1   ",children:["About You","Hair Health","Internal Health","Scalp Assessment","Plan Selection"].map((r,a)=>"hair fall"!==s&&a>0&&a<4?null:(0,t.jsx)("div",{className:`
                  px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap
                  ${a<=e?"bg-primary/20 text-foreground":"bg-muted text-muted-foreground"}
                `,children:r},r))}),(0,t.jsxs)("div",{className:"flex-1 text-right text-sm text-muted-foreground hidden md:block",children:[r,"%"]})]}),(0,t.jsx)("div",{className:"mt-4 w-full",children:(0,t.jsx)("div",{className:"h-2 bg-muted rounded-full",children:(0,t.jsx)("div",{className:"h-2 bg-primary rounded-full transition-all",style:{width:`${r}%`}})})}),(0,t.jsxs)("div",{className:"md:hidden text-right text-xs text-muted-foreground mt-1",children:[r,"%"]})]})}function o({question:e,options:s=[],value:r,onChange:a}){return(0,t.jsxs)("div",{className:"p-6 bg-card rounded-2xl border border-border shadow-soft",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-4",children:e}),(0,t.jsx)("div",{className:"space-y-4",children:s.map((s,l)=>(0,t.jsxs)("label",{className:"flex items-center gap-4 cursor-pointer",children:[(0,t.jsx)("input",{type:"radio",name:e,checked:r===s,onChange:()=>a(s),className:"form-radio text-primary h-4 w-4"}),(0,t.jsx)("span",{className:"text-foreground",children:s})]},l))})]})}function i({file:e,onChange:r}){let a=(0,s.useRef)(null),[l,n]=(0,s.useState)(null);function o(e){let t=e.target.files?.[0];t&&r(t)}return(0,s.useEffect)(()=>{if(e){let t=URL.createObjectURL(e);return n(t),()=>URL.revokeObjectURL(t)}n(null)},[e]),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)("div",{className:"w-48 h-48 rounded-xl bg-muted flex items-center justify-center overflow-hidden shadow-soft border border-border",children:l?(0,t.jsx)("img",{src:l,alt:"preview",className:"object-cover w-full h-full"}):(0,t.jsx)("div",{className:"text-center text-muted-foreground",children:"No photo yet"})}),(0,t.jsxs)("div",{className:"flex gap-3 w-full justify-center",children:[(0,t.jsxs)("label",{className:"inline-flex items-center justify-center px-6 py-3 border border-border bg-card rounded text-sm cursor-pointer hover:bg-muted transition",children:["Upload Scalp Photo",(0,t.jsx)("input",{ref:a,type:"file",accept:"image/*",style:{display:"none"},onChange:o})]}),(0,t.jsxs)("label",{className:"inline-flex items-center justify-center px-6 py-3 bg-primary text-primary-foreground rounded text-sm cursor-pointer hover:opacity-90 transition shadow-soft",children:["Take a Picture",(0,t.jsx)("input",{type:"file",accept:"image/*",capture:"environment",style:{display:"none"},onChange:o})]})]}),l&&(0,t.jsx)("div",{className:"flex gap-3",children:(0,t.jsx)("button",{onClick:function(){r(null),a.current&&(a.current.value=null)},className:"px-4 py-2 bg-card border border-border rounded shadow-soft text-sm hover:bg-muted transition",children:"Remove"})})]})}var d=e.i(25300);let c=[{id:"quick",title:"Quick Consult",price:499,summary:"15 min video consult + basic plan",includes:["Doctor review","1 follow-up chat"]},{id:"standard",title:"Standard Care",price:1499,summary:"30 min consult + 4-week plan",includes:["Personal Rx","2 follow-ups"]},{id:"comprehensive",title:"Comprehensive Remote",price:3999,summary:"Detailed digital diagnosis + 3 month support",includes:["AI-assisted report","Monthly doctor reviews"]}];function u({plans:e,onSelect:s,selectedPlan:r}){return(0,t.jsx)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-6",children:(e||c).map(e=>{let a=r===e.id;return(0,t.jsxs)("div",{className:`relative bg-white rounded-2xl shadow-md border p-6 flex flex-col transition-all ${a?"border-blue-500 bg-blue-50 shadow-lg":"border-gray-200"}`,children:[a&&(0,t.jsx)("div",{className:"absolute top-3 right-3 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-white text-sm",children:"✓"})}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg",children:e.title}),(0,t.jsxs)("span",{className:"text-xl font-bold",children:["₹",e.price]})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:e.summary}),(0,t.jsx)("ul",{className:"mt-4 text-sm text-gray-700 space-y-2 flex-1",children:e.includes.map(e=>(0,t.jsxs)("li",{className:"flex gap-2",children:[(0,t.jsx)("span",{children:"✔"})," ",e]},e))}),(0,t.jsx)(d.Button,{className:"w-full mt-5 bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>s(e),children:"Book"})]},e.id)})})}var m=e.i(9030);e.i(85915);var h=e.i(55323),x=e.i(51714),g=e.i(92348),p=e.i(36594);function f(){let e=(0,a.useRouter)(),d=(0,l.useDispatch)(),{loading:c,error:f,registerSuccess:b,verifySuccess:j,submitSuccess:y,createOrderSuccess:N,orderDetails:v,consultantId:w}=(0,l.useSelector)(e=>e.register);console.log("Register State:",{loading:c,error:f,registerSuccess:b,verifySuccess:j,submitSuccess:y,consultantId:w});let[P,S]=(0,s.useState)(0),[k,C]=(0,s.useState)({}),[I,R]=(0,s.useState)({name:"",phone:"",age:"",region:"",gender:"",healthIssue:"hair fall",stage:null,hair:{},internal:{},scalpPhoto:null,plan:"",planPrice:0}),[T,q]=(0,s.useState)(null),[A,D]=(0,s.useState)(null),H=(0,s.useRef)(null),[O,E]=(0,s.useState)(!1),[U,M]=(0,s.useState)(!1),[L,F]=(0,s.useState)("");async function B(){try{if(!H.current)return void alert("Recaptcha not ready! Try again.");let e="+91"+I.phone,t=await (0,h.signInWithPhoneNumber)(m.auth,e,H.current);D(t),M(!0)}catch(e){console.log("SEND OTP ERROR:",e),alert("OTP sending failed. Try again.")}}async function $(){try{if(!A)return void alert("OTP expired. Please resend.");await A.confirm(L);let e=await m.auth.currentUser.getIdToken();d((0,p.verifyUser)({mobile:I.phone,idToken:e,consultantId:w}))}catch(e){console.log("VERIFY ERROR",e),alert("Invalid OTP")}}function z(){let e={};return 0===P&&(I.name.trim()||(e.name="Name is required"),I.phone.trim()||(e.phone="Phone is required"),I.age||(e.age="Age is required"),I.gender||(e.gender="Gender is required"),I.region||(e.region="Region is required")),1===P&&null===I.stage&&(e.stage="Please choose your stage"),3!==P||I.scalpPhoto||(e.scalpPhoto="Scalp photo is required"),4!==P||I.plan||(e.plan="Please select a plan"),C(e),0===Object.keys(e).length}function Y(e,t){R(s=>({...s,[e]:t}))}function V(e,t,s){R(r=>({...r,[e]:{...r[e],[t]:s}}))}window.location.origin,(0,s.useEffect)(()=>{H.current||(H.current=new h.RecaptchaVerifier("recaptcha-container",{size:"invisible"},m.auth))},[]),(0,s.useEffect)(()=>{b&&w&&(console.log("Registration successful! ConsultantId:",w),localStorage.setItem("consultantId",w),B())},[b,w]),(0,s.useEffect)(()=>{j&&(E(!1),S("hair fall"===I.healthIssue?1:4),window.scrollTo({top:0,behavior:"smooth"}),d((0,p.clearApiState)()))},[j,I.healthIssue]),(0,s.useEffect)(()=>{if(y){let e=w||localStorage.getItem("consultantId");d((0,p.createOrder)({consultantId:e,amount:I.planPrice})),d((0,p.clearApiState)())}},[y]),(0,s.useEffect)(()=>{if(N&&v){let t=new URLSearchParams({orderId:v.orderId,amount:v.amount,currency:v.currency,key:v.key,consultantId:w||localStorage.getItem("consultantId")});e.push(`/payment-method/online?${t.toString()}`),d((0,p.clearApiState)())}},[N,v]),(0,s.useEffect)(()=>{f&&(alert(f),d((0,p.clearApiState)()))},[f]);let G=I.gender||"male",K=({children:e})=>(0,t.jsx)("div",{className:"absolute top-full left-0 w-full mt-2 bg-card border border-border shadow-lg rounded-xl p-2 z-20",children:e});return(0,t.jsx)("div",{className:"min-h-screen py-8 bg-background-soft",children:(0,t.jsxs)("main",{className:"max-w-4xl mx-auto px-6",children:[(0,t.jsx)("div",{id:"recaptcha-container"}),(0,t.jsxs)("div",{className:"flex justify-between mb-4 text-sm text-muted-foreground",children:[P>0?(0,t.jsx)("button",{onClick:function(){1===P?S(0):2===P?S(1):3===P?S(2):4===P&&("hair fall"===I.healthIssue?S(3):S(0)),window.scrollTo({top:0,behavior:"smooth"})},children:"← Previous"}):(0,t.jsx)("span",{}),(0,t.jsx)(r.default,{href:"/",className:"hover:text-accent",children:"Exit"})]}),(0,t.jsx)(n,{step:P,healthIssue:I.healthIssue}),(0,t.jsxs)("div",{className:"bg-card mt-6 rounded-2xl shadow-soft border border-border p-6",children:[0===P&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h2",{className:"text-4xl text-center font-bold mb-8 text-foreground",children:"Tell us about you"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"font-medium text-foreground",children:"Full Name"}),(0,t.jsx)("input",{className:"w-full border border-border bg-background px-3 py-2 rounded mt-1 text-foreground",value:I.name,onChange:e=>Y("name",e.target.value)}),k.name&&(0,t.jsx)("p",{className:"text-red-600 text-sm mt-1",children:k.name})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"font-medium text-foreground",children:"Phone Number"}),(0,t.jsx)("input",{className:"w-full border border-border bg-background px-3 py-2 rounded mt-1 text-foreground",value:I.phone,onChange:e=>Y("phone",e.target.value)}),k.phone&&(0,t.jsx)("p",{className:"text-red-600 text-sm mt-1",children:k.phone})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"font-medium text-foreground",children:"Age"}),(0,t.jsx)("input",{type:"number",className:"w-full border border-border bg-background px-3 py-2 rounded mt-1 text-foreground",value:I.age,onChange:e=>Y("age",e.target.value)}),k.age&&(0,t.jsx)("p",{className:"text-red-600 text-sm mt-1",children:k.age})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"font-medium text-foreground",children:"Gender"}),(0,t.jsx)("div",{className:"flex gap-3 mt-2",children:["male","female"].map(e=>(0,t.jsx)("button",{onClick:()=>Y("gender",e),className:`px-5 py-2 rounded border 
                        ${I.gender===e?"bg-primary text-primary-foreground":"bg-muted text-foreground border-border"}`,children:e.toUpperCase()},e))}),k.gender&&(0,t.jsx)("p",{className:"text-red-600 text-sm mt-1",children:k.gender})]}),(0,t.jsxs)("div",{className:"flex flex-col relative mt-4",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-foreground mb-1",children:"Region"}),(0,t.jsxs)("button",{type:"button",onClick:()=>q("region"===T?null:"region"),className:"flex items-center justify-between bg-background border border-border px-3 py-2 rounded-xl w-full text-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.MapPin,{size:18,className:"text-primary"}),I.region||"Select Region"]}),(0,t.jsx)(g.ChevronDown,{size:16,className:"text-muted-foreground"})]}),"region"===T&&(0,t.jsx)(K,{children:["India","Asia","Europe, Australia","USA, Canada","South America, Africa"].map(e=>(0,t.jsx)("div",{onClick:()=>{Y("region",e),q(null)},className:"px-3 py-2 hover:bg-secondary/15 rounded-lg cursor-pointer text-sm text-foreground",children:e},e))}),k.region&&(0,t.jsx)("p",{className:"text-red-600 text-sm mt-1",children:k.region})]}),(0,t.jsxs)("div",{className:"flex flex-col relative mt-4",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-foreground mb-1",children:"Health Issue"}),(0,t.jsxs)("button",{type:"button",onClick:()=>q("health"===T?null:"health"),className:"flex items-center justify-between bg-background border border-border px-3 py-2 rounded-xl w-full text-foreground",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("span",{children:I.healthIssue||"Select Health Issue"})}),(0,t.jsx)(g.ChevronDown,{size:16,className:"text-muted-foreground"})]}),"health"===T&&(0,t.jsx)(K,{children:["Hair Fall","Respiratory","Skin Disorders","Gastrointestinal","Mental & Emotional Health","Musculoskeletal","ENT Problems","Women’s Health","Children’s Health","Chronic Conditions","Lifestyle-Related Problems","Obesity"].map(e=>(0,t.jsx)("div",{onClick:()=>{Y("healthIssue",e.toLowerCase()),q(null)},className:"px-3 py-2 hover:bg-secondary/15 rounded-lg cursor-pointer text-sm text-foreground",children:e},e))})]})]}),1===P&&"hair fall"===I.healthIssue&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h2",{className:"text-4xl text-center font-bold mb-8 text-foreground",children:"Hair Health"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:({male:[{id:0,label:"Stage 1 (Mild)",img:"/images/stages/male-stage1.png"},{id:1,label:"Stage 2 (Moderate)",img:"/images/stages/male-stage2.png"},{id:2,label:"Stage 3 (Severe)",img:"/images/stages/male-stage3.png"}],female:[{id:0,label:"Stage 1 (Mild)",img:"/images/stages/female-stage1.png"},{id:1,label:"Stage 2 (Moderate)",img:"/images/stages/female-stage2.png"},{id:2,label:"Stage 3 (Severe)",img:"/images/stages/female-stage3.png"}]})[G].map(e=>(0,t.jsxs)("div",{onClick:()=>Y("stage",e.id),className:`rounded-xl border p-4 cursor-pointer transition
                      ${I.stage===e.id?"ring-2 ring-primary bg-primary/10":"border-border bg-muted"}`,children:[(0,t.jsx)("img",{src:e.img,className:"w-full mb-3 rounded"}),(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.label})]},e.id))}),k.stage&&(0,t.jsx)("p",{className:"text-red-600 text-sm mt-2",children:k.stage}),(0,t.jsx)("div",{className:"mt-6 space-y-6",children:[{id:"family",q:"Do you have a family history of hair loss?",options:["Mother or mother's side","Father or father's side","Both","None"]},{id:"dandruff",q:"Do you have Dandruff?",options:["No Dandruff","Mild Dandruff","Heavy Dandruff","Psoriasis / Seborrheic Dermatitis"]}].map(e=>(0,t.jsx)(o,{question:e.q,options:e.options,value:I.hair[e.id],onChange:t=>V("hair",e.id,t)},e.id))})]}),2===P&&"hair fall"===I.healthIssue&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h2",{className:"text-4xl text-center font-bold mb-8 text-foreground",children:"Internal Health"}),(0,t.jsx)("div",{className:"space-y-6",children:[{id:"sleep",q:"How well do you sleep?",options:["Peacefully 6-8 hours","Disturbed sleep","Difficulty sleeping"]},{id:"stress",q:"How stressed are you?",options:["None","Low","Moderate","High"]},{id:"constipation",q:"Do you feel constipated?",options:["No","Yes (fewer than 3 stools/week)","Unsatisfied after stools","IBS"]},{id:"gas",q:"Gas, Acidity, or Bloating?",options:["No","Sometimes","Often"]},{id:"energy",q:"How is your energy during the day?",options:["Normal","Low in morning","Low afternoon","Low evening","Always low"]},{id:"supplements",q:"Are you taking supplements?",options:["Yes","No"]}].map(e=>(0,t.jsx)(o,{question:e.q,options:e.options,value:I.internal[e.id],onChange:t=>V("internal",e.id,t)},e.id))})]}),3===P&&"hair fall"===I.healthIssue&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-center mb-4 text-foreground",children:"Upload your scalp picture"}),(0,t.jsx)(i,{file:I.scalpPhoto,onChange:e=>Y("scalpPhoto",e)}),k.scalpPhoto&&(0,t.jsx)("p",{className:"text-red-600 text-sm mt-2",children:k.scalpPhoto})]}),4===P&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h2",{className:"text-4xl text-center font-bold mb-8 text-foreground",children:"Choose Your Plan"}),(0,t.jsx)(u,{selectedPlan:I.plan,onSelect:e=>{Y("plan",e.id),Y("planPrice",e.price)}}),k.plan&&(0,t.jsx)("p",{className:"text-red-600 text-sm mt-4 text-center",children:k.plan})]}),(0,t.jsx)("div",{className:"flex justify-end mt-6",children:P<4?(0,t.jsx)("button",{onClick:function(){if(z()){if(0===P){d((0,p.registerUser)({name:I.name,mobile:I.phone,age:I.age,gender:I.gender,region:I.region,healthIssue:I.healthIssue})),E(!0);return}S(e=>e+1),window.scrollTo({top:0,behavior:"smooth"})}},disabled:c,className:"px-6 py-2 bg-primary text-primary-foreground rounded shadow-soft hover:bg-primary-dark disabled:opacity-50",children:c?"Processing...":"Next →"}):(0,t.jsx)("button",{onClick:function(){if(!z())return;let e=w||localStorage.getItem("consultantId");if(!e){alert("Please complete registration and verification first"),S(0);return}let t={hairHealth:{stage:I.stage,familyHistory:I.hair?.family||"",dandruff:I.hair?.dandruff||"",selectedStage:I.stage},internalHealth:I.internal||{},scalpAssessment:{scalpPhoto:I.scalpPhoto?.name||null},plan:I.plan};d((0,p.submitData)({consultantId:e,consultationData:t,scalpPhoto:I.scalpPhoto}))},className:"px-6 py-2 bg-accent text-accent-foreground rounded shadow-soft hover:bg-accent/80",children:"Proceed to Payment"})})]}),O&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-xl w-full max-w-md",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-center mb-4",children:"Verify Your Phone"}),(0,t.jsx)("p",{className:"text-center text-gray-600 text-sm mb-2",children:"OTP will be sent to:"}),(0,t.jsxs)("p",{className:"text-center font-medium mb-4",children:["+91 ",I.phone]}),U?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{type:"text",className:"w-full border px-3 py-2 rounded mb-3",placeholder:"Enter OTP",value:L,onChange:e=>F(e.target.value)}),(0,t.jsx)("button",{onClick:$,disabled:c,className:"w-full bg-primary text-white py-2 rounded-lg disabled:opacity-50",children:c?"Verifying...":"Verify OTP"})]}):(0,t.jsx)("div",{className:"text-center text-gray-500",children:"Sending OTP..."}),(0,t.jsx)("button",{onClick:()=>{E(!1),M(!1),F("")},className:"mt-4 w-full text-center text-gray-500 text-sm",children:"Cancel"})]})})]})})}e.s(["default",()=>f],45682)}]);